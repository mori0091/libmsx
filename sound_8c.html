<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libmsx: src/sound.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libmsx
   </div>
   <div id="projectbrief">C library for MSX</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sound_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sound.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Copyright (c) 2021 Daishi Mori (mori0091)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="bios_8h_source.html">../include/bios.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psg_8h_source.html">../include/psg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sound_8h_source.html">../include/sound.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for sound.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="sound_8c__incl.svg" width="530" height="187"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="sound_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structchannel.html">channel</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsound__state.html">sound_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af7106919ce6b8fcbb8beda18c1fb9035"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#af7106919ce6b8fcbb8beda18c1fb9035">COUNT_PER_SECOND</a>&#160;&#160;&#160;(300)</td></tr>
<tr class="separator:af7106919ce6b8fcbb8beda18c1fb9035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac174db55392218c66ba57b1392d76b2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#ac174db55392218c66ba57b1392d76b2f">COUNT_PER_TICK_60HZ</a>&#160;&#160;&#160;(<a class="el" href="sound_8c.html#af7106919ce6b8fcbb8beda18c1fb9035">COUNT_PER_SECOND</a> / 60)</td></tr>
<tr class="separator:ac174db55392218c66ba57b1392d76b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7e35fd4fef3532ed0c5e5bc3548d4ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#ad7e35fd4fef3532ed0c5e5bc3548d4ee">sound_set_repeat</a> (bool <a class="el" href="sound_8c.html#a98c61ed9410ab805baab005fe7713d9b">repeat</a>)</td></tr>
<tr class="memdesc:ad7e35fd4fef3532ed0c5e5bc3548d4ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on/off the auto-repeat of the BGM.  <a href="sound_8c.html#ad7e35fd4fef3532ed0c5e5bc3548d4ee">More...</a><br /></td></tr>
<tr class="separator:ad7e35fd4fef3532ed0c5e5bc3548d4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac85593d9f7d37f53db1258f624f2a98c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#ac85593d9f7d37f53db1258f624f2a98c">sound_set_mute</a> (uint8_t mute)</td></tr>
<tr class="memdesc:ac85593d9f7d37f53db1258f624f2a98c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mute/unmute for each sound channel.  <a href="sound_8c.html#ac85593d9f7d37f53db1258f624f2a98c">More...</a><br /></td></tr>
<tr class="separator:ac85593d9f7d37f53db1258f624f2a98c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a93615db20eb70cf9df084778d9a9ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#a9a93615db20eb70cf9df084778d9a9ee">sound_effect</a> (const struct <a class="el" href="structsound__clip.html">sound_clip</a> *s)</td></tr>
<tr class="memdesc:a9a93615db20eb70cf9df084778d9a9ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plays the specified music clip as sound effect.  <a href="sound_8c.html#a9a93615db20eb70cf9df084778d9a9ee">More...</a><br /></td></tr>
<tr class="separator:a9a93615db20eb70cf9df084778d9a9ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3465ea25875e5461142411740aa69e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#af3465ea25875e5461142411740aa69e3">sound_set_bgm</a> (const struct <a class="el" href="structsound__clip.html">sound_clip</a> *s)</td></tr>
<tr class="memdesc:af3465ea25875e5461142411740aa69e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the specified music clip as BGM in the sound driver.  <a href="sound_8c.html#af3465ea25875e5461142411740aa69e3">More...</a><br /></td></tr>
<tr class="separator:af3465ea25875e5461142411740aa69e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893fbd47631ab99368244cfbd0854b36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#a893fbd47631ab99368244cfbd0854b36">sound_start</a> (void)</td></tr>
<tr class="memdesc:a893fbd47631ab99368244cfbd0854b36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the BGM.  <a href="sound_8c.html#a893fbd47631ab99368244cfbd0854b36">More...</a><br /></td></tr>
<tr class="separator:a893fbd47631ab99368244cfbd0854b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e396bab2471f72285f290ce7a5cab1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#a90e396bab2471f72285f290ce7a5cab1">sound_init</a> (void)</td></tr>
<tr class="memdesc:a90e396bab2471f72285f290ce7a5cab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the PSG and the sound driver.  <a href="sound_8c.html#a90e396bab2471f72285f290ce7a5cab1">More...</a><br /></td></tr>
<tr class="separator:a90e396bab2471f72285f290ce7a5cab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ffba4b6e960e4a0699f50b8a72d795"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#a05ffba4b6e960e4a0699f50b8a72d795">sound_stop</a> (void)</td></tr>
<tr class="memdesc:a05ffba4b6e960e4a0699f50b8a72d795"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the BGM.  <a href="sound_8c.html#a05ffba4b6e960e4a0699f50b8a72d795">More...</a><br /></td></tr>
<tr class="separator:a05ffba4b6e960e4a0699f50b8a72d795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa69657f5f366eef034685b19c9c0ea3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#aa69657f5f366eef034685b19c9c0ea3f">sound_pause</a> (void)</td></tr>
<tr class="memdesc:aa69657f5f366eef034685b19c9c0ea3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause the BGM.  <a href="sound_8c.html#aa69657f5f366eef034685b19c9c0ea3f">More...</a><br /></td></tr>
<tr class="separator:aa69657f5f366eef034685b19c9c0ea3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca95ae20cf6bbdedef623278c7c44f5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sound_8c.html#aca95ae20cf6bbdedef623278c7c44f5f">sound_player</a> (void)</td></tr>
<tr class="memdesc:aca95ae20cf6bbdedef623278c7c44f5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine of the sound driver.  <a href="sound_8c.html#aca95ae20cf6bbdedef623278c7c44f5f">More...</a><br /></td></tr>
<tr class="separator:aca95ae20cf6bbdedef623278c7c44f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Copyright (c) 2021 Daishi Mori (mori0091) </p>
<p>This software is released under the MIT License. See <a href="https://github.com/mori0091/libmsx/blob/main/LICENSE">https://github.com/mori0091/libmsx/blob/main/LICENSE</a></p>
<p>GitHub libmsx project <a href="https://github.com/mori0091/libmsx">https://github.com/mori0091/libmsx</a> </p>

<p class="definition">Definition in file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af7106919ce6b8fcbb8beda18c1fb9035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7106919ce6b8fcbb8beda18c1fb9035">&#9670;&nbsp;</a></span>COUNT_PER_SECOND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COUNT_PER_SECOND&#160;&#160;&#160;(300)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00023">23</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="ac174db55392218c66ba57b1392d76b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac174db55392218c66ba57b1392d76b2f">&#9670;&nbsp;</a></span>COUNT_PER_TICK_60HZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COUNT_PER_TICK_60HZ&#160;&#160;&#160;(<a class="el" href="sound_8c.html#af7106919ce6b8fcbb8beda18c1fb9035">COUNT_PER_SECOND</a> / 60)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00024">24</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad7e35fd4fef3532ed0c5e5bc3548d4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e35fd4fef3532ed0c5e5bc3548d4ee">&#9670;&nbsp;</a></span>sound_set_repeat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_set_repeat </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>repeat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on/off the auto-repeat of the BGM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">repeat</td><td><code>true</code>: turn on, <code>false</code>: turn off </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00056">56</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="ac85593d9f7d37f53db1258f624f2a98c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac85593d9f7d37f53db1258f624f2a98c">&#9670;&nbsp;</a></span>sound_set_mute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_set_mute </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mute</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mute/unmute for each sound channel. </p>
<p>The parameter <code>mute</code> is a bit-set of the mute switches.</p>
<ul>
<li>bit #0 (SOUND_CHANNEL_A) is for PSG channel A</li>
<li>bit #1 (SOUND_CHANNEL_B) is for PSG channel B</li>
<li>bit #2 (SOUND_CHANNEL_C) is for PSG channel C</li>
</ul>
<p>If a bit is <code>1</code>, the corresponding channel is muted; if a bit is <code>0</code>, the corresponding channel is unmuted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mute</td><td>the bit-set of the mute switches. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00094">94</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a9a93615db20eb70cf9df084778d9a9ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a93615db20eb70cf9df084778d9a9ee">&#9670;&nbsp;</a></span>sound_effect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_effect </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsound__clip.html">sound_clip</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plays the specified music clip as sound effect. </p>
<p><b>Priority of the sound effect</b></p>
<p>The priority of the sound effect is specified by <code>s-&gt;priority</code>. The larger the value, the higher the priority. This priority determines whether or not the sound driver will play the specified sound clip, as follows</p>
<ul>
<li>If no sound effect is playing, the specified sound clip will be played immediately.</li>
<li>If a sound effect is playing and the priority of the specified sound clip is higher than that, the current sound effect will be stopped and the specified sound clip will be played immediately.</li>
<li>If a sound effect is playing and the priority of the specified sound clip is lower than or equal to that, the specified sound clip will be ignored and will not be played.</li>
</ul>
<p><b>Auto-mute of the background music</b></p>
<p>While the sound effect is playing, some channels of the background music will be automatically muted (if they conflict with the sound effect) and those channels will be used to play the sound effect.</p>
<p>When the sound effect finishes playing, all channels will be used for the background music again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Pointer to the music clip structure to be played as sound effect. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00139">139</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="af3465ea25875e5461142411740aa69e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3465ea25875e5461142411740aa69e3">&#9670;&nbsp;</a></span>sound_set_bgm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_set_bgm </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsound__clip.html">sound_clip</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the specified music clip as BGM in the sound driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Pointer to the music clip structure to be played as BGM. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00165">165</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a893fbd47631ab99368244cfbd0854b36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893fbd47631ab99368244cfbd0854b36">&#9670;&nbsp;</a></span>sound_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the BGM. </p>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00173">173</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a90e396bab2471f72285f290ce7a5cab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e396bab2471f72285f290ce7a5cab1">&#9670;&nbsp;</a></span>sound_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the PSG and the sound driver. </p>
<p>This function must be called at least once. In particular, it must be called before the first call to <a class="el" href="sound_8h.html#aca95ae20cf6bbdedef623278c7c44f5f" title="Main routine of the sound driver.">sound_player()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>If <a class="el" href="sound_8h.html#aca95ae20cf6bbdedef623278c7c44f5f" title="Main routine of the sound driver.">sound_player()</a> is called without <a class="el" href="sound_8h.html#a90e396bab2471f72285f290ce7a5cab1" title="This function initializes the PSG and the sound driver.">sound_init()</a> being called, its behavior is undefined and, in the worst case, may cause damage to the (real) MSX machine. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00177">177</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a05ffba4b6e960e4a0699f50b8a72d795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ffba4b6e960e4a0699f50b8a72d795">&#9670;&nbsp;</a></span>sound_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the BGM. </p>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00192">192</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="aa69657f5f366eef034685b19c9c0ea3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa69657f5f366eef034685b19c9c0ea3f">&#9670;&nbsp;</a></span>sound_pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_pause </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pause the BGM. </p>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00196">196</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="aca95ae20cf6bbdedef623278c7c44f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca95ae20cf6bbdedef623278c7c44f5f">&#9670;&nbsp;</a></span>sound_player()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sound_player </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main routine of the sound driver. </p>
<p>To play the background music and/or sound effects, you need to call this function at every VSYNC timing. The easiest way is to set this function as the VSYNC interrupt handler by calling <a class="el" href="interrupt_8h.html#a92722299d30fbe4f1c49c07f30167a6c" title="Register user defined VSYNC interrupt handler.">set_vsync_handler()</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// At first, initialize the sound driver.</span></div>
<div class="line"><a class="code" href="sound_8h.html#a90e396bab2471f72285f290ce7a5cab1">sound_init</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Then, register the sound driver as the VSYNC interrupt handler.</span></div>
<div class="line"><a class="code" href="interrupt_8h.html#a92722299d30fbe4f1c49c07f30167a6c">set_vsync_handler</a>(<a class="code" href="sound_8h.html#aca95ae20cf6bbdedef623278c7c44f5f">sound_player</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// And then, calls other APIs to start, stop, etc.</span></div>
<div class="line"><a class="code" href="sound_8h.html#ad7e35fd4fef3532ed0c5e5bc3548d4ee">sound_set_repeat</a>(<span class="keyword">true</span>);</div>
<div class="line"><a class="code" href="sound_8h.html#af3465ea25875e5461142411740aa69e3">sound_set_bgm</a>(&amp;my_bgm);</div>
<div class="line"><a class="code" href="sound_8h.html#a893fbd47631ab99368244cfbd0854b36">sound_start</a>();</div>
<div class="ttc" id="ainterrupt_8h_html_a92722299d30fbe4f1c49c07f30167a6c"><div class="ttname"><a href="interrupt_8h.html#a92722299d30fbe4f1c49c07f30167a6c">set_vsync_handler</a></div><div class="ttdeci">void set_vsync_handler(void(*handler)(void))</div><div class="ttdoc">Register user defined VSYNC interrupt handler.</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00079">interrupt.c:79</a></div></div>
<div class="ttc" id="asound_8h_html_a893fbd47631ab99368244cfbd0854b36"><div class="ttname"><a href="sound_8h.html#a893fbd47631ab99368244cfbd0854b36">sound_start</a></div><div class="ttdeci">void sound_start(void)</div><div class="ttdoc">Start the BGM.</div><div class="ttdef"><b>Definition:</b> <a href="sound_8c_source.html#l00173">sound.c:173</a></div></div>
<div class="ttc" id="asound_8h_html_a90e396bab2471f72285f290ce7a5cab1"><div class="ttname"><a href="sound_8h.html#a90e396bab2471f72285f290ce7a5cab1">sound_init</a></div><div class="ttdeci">void sound_init(void)</div><div class="ttdoc">This function initializes the PSG and the sound driver.</div><div class="ttdef"><b>Definition:</b> <a href="sound_8c_source.html#l00177">sound.c:177</a></div></div>
<div class="ttc" id="asound_8h_html_aca95ae20cf6bbdedef623278c7c44f5f"><div class="ttname"><a href="sound_8h.html#aca95ae20cf6bbdedef623278c7c44f5f">sound_player</a></div><div class="ttdeci">void sound_player(void)</div><div class="ttdoc">Main routine of the sound driver.</div><div class="ttdef"><b>Definition:</b> <a href="sound_8c_source.html#l00329">sound.c:329</a></div></div>
<div class="ttc" id="asound_8h_html_ad7e35fd4fef3532ed0c5e5bc3548d4ee"><div class="ttname"><a href="sound_8h.html#ad7e35fd4fef3532ed0c5e5bc3548d4ee">sound_set_repeat</a></div><div class="ttdeci">void sound_set_repeat(bool repeat)</div><div class="ttdoc">Turn on/off the auto-repeat of the BGM.</div><div class="ttdef"><b>Definition:</b> <a href="sound_8c_source.html#l00056">sound.c:56</a></div></div>
<div class="ttc" id="asound_8h_html_af3465ea25875e5461142411740aa69e3"><div class="ttname"><a href="sound_8h.html#af3465ea25875e5461142411740aa69e3">sound_set_bgm</a></div><div class="ttdeci">void sound_set_bgm(const struct sound_clip *s)</div><div class="ttdoc">Sets the specified music clip as BGM in the sound driver.</div><div class="ttdef"><b>Definition:</b> <a href="sound_8c_source.html#l00165">sound.c:165</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>If <a class="el" href="sound_8h.html#aca95ae20cf6bbdedef623278c7c44f5f" title="Main routine of the sound driver.">sound_player()</a> is called without <a class="el" href="sound_8h.html#a90e396bab2471f72285f290ce7a5cab1" title="This function initializes the PSG and the sound driver.">sound_init()</a> being called, its behavior is undefined and, in the worst case, may cause damage to the (real) MSX machine. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00329">329</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a117781baf820700e0b0674a55811fe3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a117781baf820700e0b0674a55811fe3a">&#9670;&nbsp;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsound__state.html">sound_state</a> state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00040">40</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a98c61ed9410ab805baab005fe7713d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98c61ed9410ab805baab005fe7713d9b">&#9670;&nbsp;</a></span>repeat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool repeat</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00047">47</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a1656129c4a4fd8809254194f08f0ac70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1656129c4a4fd8809254194f08f0ac70">&#9670;&nbsp;</a></span>paused</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool paused</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sound_8c_source.html#l00048">48</a> of file <a class="el" href="sound_8c_source.html">sound.c</a>.</p>

</div>
</div>
<a id="a2653e85d5af4599e403c39312562d7b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2653e85d5af4599e403c39312562d7b9">&#9670;&nbsp;</a></span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }  bg</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b2f509d1febe11b758fbbd90ec49f8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b2f509d1febe11b758fbbd90ec49f8b">&#9670;&nbsp;</a></span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }  se</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="sound_8c.html">sound.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
